/***
 * @描述：下拉框类，继承Component
 */
import EAttach from "ezdev-pcview/components/attach/EAttach";
'use strict';

export default class extends EAttach {
    //覆盖BaseComponent的构造方法，修改name为e-attach
    constructor() {
        super();
    }

    /**
     * 生成e-attach的html
     */
    generateHtml(args) {

        var attachmentId = args.attachmentId;

        //把第一次初始化需要的数据放入args
        this.refreshDatas(args);

        //生成attacher的主div
        var attacher = $('<div id="atr-main-'+attachmentId+'" class="wu-example" ></div>');
        //生成存放attachmentId的元素
        var idSaver = $('<input type="hidden" id="'+args.atrIdSaver+'" value="'+attachmentId+'" />');
        var nameSaver = $('<input type="hidden" name="'+args.atrNameSaver+'" value="'+attachmentId+'" />');
        attacher.append(idSaver);
        attacher.append(nameSaver);

        //初始化显示
        if(args.atrType=="default"){
            if(!args.isShowBack)
                attacher.append(this.getInputRow(args, "default"));
        }else if(args.atrType=="userImg"){
            if(!args.isShowBack)
                attacher.append(this.getInputRow(args, "userImg"));
        }else if(args.atrType=="aLink"){
            if(!args.isShowBack)
                attacher.append(this.getInputRow(args, "aLink"));
            attacher.append(this.getALinkRow(args));
        }else if(args.atrType=="img42"){
            if(!args.isShowBack)
                attacher.append(this.getInputRow(args, "img42"));
            attacher.append(this.getImgRow(args));
        }else{
            attacher.append($('<input value="请检查e-attach控件的atrType属性值。" style="width:300px" readonly="readonly">'));
        }

        //整个节点的html
        return attacher.prop("outerHTML");
    }



    getInputRow(args, type){

        var attachmentId = args.attachmentId;
        var inputRow = $('<div id="atr-inputRow-'+attachmentId+'" class="row"></div>');

        var inputWidth = args.inputWidth?" width:"+args.inputWidth+"px ":"";

        var input = undefined;
        if(type=="default"){
            input = $('<input type="text" id="atr-attachInput-'+attachmentId+'" class="col-sm-7 uploader-input" ' +
                'style="float: left; ' + inputWidth + '" placeholder=" " value="" >');
        }else if(type=="userImg"){
            input = $('<input type="text" id="atr-attachInput-'+attachmentId+'" class="col-sm-7 uploader-input" ' +
                'style="float: left; ' + inputWidth + '" placeholder=" " value="" >');
        }else if(type=="aLink" || type=="img42"){
            input = $('<input type="text" id="atr-attachInput-'+attachmentId+'" class="col-sm-9 uploader-input" ' +
                'style="float: left; ' + inputWidth + '" placeholder=" " value="" >');
        }

        var btns = undefined;
        if(type=="default"){
            btns = $('  <div class="col-sm-5 btns" align="center"> '+
                '<div id="atr-picker-'+attachmentId+'" class="uploader-picker">选择文件</div> '+
                '<div id="atr-delBtn-'+attachmentId+'" atrAttachmentId="'+attachmentId+'" class="btn btn-primary">删除</div> '+
                '</div>');
        }else if(type=="userImg"){
            btns = $('  <div class="col-sm-5 btns" align="center"> '+
                '<div id="atr-picker-'+attachmentId+'" class="uploader-picker">修改头像</div> ');
        }else if(type=="aLink" || type=="img42"){
            btns = $('  <div class="col-sm-3 btns" align="center">\
                        <div id="atr-picker-'+attachmentId+'" class="uploader-picker">选择文件</div>\
                    </div>');
        }

        inputRow.append(input);
        inputRow.append(btns);

        return inputRow;
    }




}
